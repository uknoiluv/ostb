<!DOCTYPE HTML>
<!-- <html ng-app="angularApp"> -->
<html style="width: 100%; height: 100%;">
	<head>
		<title>Hello World</title>
		<meta charset="utf-8">
		<style>
			#editor {
				font-size: 1em;
			}
		</style>
		<!--<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular.min.js"></script>-->
        <!--<script type="text/javascript" src="/js/app.js"></script>-->
	</head>

	<body style="width: 100%; height: 100%;">
		<h1>HELLO</h1>
<!-- 		<h2>Open Source Textbook</h2>
		<p>This is our index.ejs page</p>
		<div id="header">
			<div id="htext">
				<input>Editing <b>hello</b></input>
			</div>
		</div> -->
		<!-- </div>
		<textarea id="editor" disabled>Loading...</textarea>
 -->
		<div id="editor" style="width: 100%; height: 100%;"></div>


        <!-- <button ng-click="goPost()"> button yo!! </button> -->

<!-- 		<div>
          <input type="text" ng-model="yourName" placeholder="Enter a name here">
          <h1>Hello, {{ yourName }}!<h1>
		</div>
 -->		
        
		<!-- <script src="http://ajaxorg.github.com/ace/build/src/ace.js"></script> -->
		<script src='/lib/markdown/showdown.js'></script>
		<script src='/lib/ace/ace.js'></script>
		<script src="/channel/bcsocket.js"></script> 
		<!--<script src="/share/share.uncompressed.js"></script>-->
		<script src="/share/share.js"></script>
		<script src="/share/ace.js"></script>

		<!--<script src="/share/textarea.js"></script>-->
		<script>
		// var editor = ace.edit("editor");
		
		// sharejs.open('hello', 'text', function(error, doc) {
		// 	doc.attach_ace(editor);
		// });

	window.onload = function() {
	  var converter = new Showdown.converter();
	  var view = document.getElementById('view');
	      var editor = ace.edit("editor");
	  editor.setReadOnly(true);
	  editor.session.setUseWrapMode(true);
	  editor.setShowPrintMargin(false);
	  // This could instead be written simply as:
	  // sharejs.open('wiki:Main', function(doc, error) {
	  //   ...
	  var connection = new sharejs.Connection('http://' + window.location.hostname + '/channel');
	  connection.open('wiki:Main', function(error, doc) {
	    if (error) {
	      console.error(error);
	      return;
	    }
	    doc.attach_ace(editor);
	    editor.setReadOnly(false);
	    var render = function() {
	      view.innerHTML = converter.makeHtml(doc.snapshot);
	    };
	    window.doc = doc;
	    render();
	    doc.on('change', render);
	  });
	};
	    
			// var elem = document.getElementById('editor');

			// sharejs.open('hello', 'text', function(error, doc) {
			// 	debugger;
			// 	window.doc = doc;
			// 	if (error) {
			// 		console.log(error);
			// 	} else {
			// 		elem.disabled = false;
			// 		doc.attach_textarea(elem);
			// 	}
			// });
		</script>
	</body>
</html>	
